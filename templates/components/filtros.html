<div class="d-flex justify-content-between align-items-center mb-4">
    <div class="d-flex gap-3">
        <div class="dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center gap-2" type="button" data-bs-toggle="dropdown">
                <i class="bi bi-geo-alt"></i>
                {{ sede_seleccionada if sede_seleccionada else 'CENTRAL' }}
            </button>
            <ul class="dropdown-menu">
                {% for sede in sedes %}
                <li><a class="dropdown-item {% if sede == sede_seleccionada %}active{% endif %}" 
                      href="#" 
                      onclick="seleccionarSede('{{ sede }}')">{{ sede }}</a></li>
                {% endfor %}
            </ul>
        </div>

        <div class="dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center gap-2" type="button" data-bs-toggle="dropdown">
                <i class="bi bi-calendar3"></i>
                {{ fecha_inicio if fecha_inicio else 'Seleccionar Fecha' }}
            </button>
            <ul class="dropdown-menu p-3" style="min-width: 300px" id="fechas-disponibles">
                <div class="list-group">
                    <!-- Las fechas se cargarán dinámicamente aquí -->
                </div>
            </ul>
        </div>
    </div>
</div>

<script>
function seleccionarSede(sede) {
    // Obtener fechas disponibles para la sede seleccionada
    fetch(`/fechas_por_sede/${sede}`)
        .then(response => response.json())
        .then(fechas => {
            const fechasContainer = document.getElementById('fechas-disponibles');
            fechasContainer.innerHTML = '';

            const listGroup = document.createElement('div');
            listGroup.className = 'list-group';

            fechas.forEach(fecha => {
                const fechaLink = document.createElement('a');
                fechaLink.href = `?sede=${sede}&fecha_inicio=${fecha}`;
                fechaLink.className = 'list-group-item list-group-item-action';
                fechaLink.textContent = fecha;
                listGroup.appendChild(fechaLink);
            });

            fechasContainer.appendChild(listGroup);
        });
}

// Cargar fechas para la sede inicial si está seleccionada
document.addEventListener('DOMContentLoaded', function() {
    const sedeSeleccionada = '{{ sede_seleccionada }}';
    if (sedeSeleccionada) {
        seleccionarSede(sedeSeleccionada);
    }
});
</script>